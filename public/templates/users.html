<div class="filter">
	<div class="container">
		<div class="row">
			<div class="col-md-3 m">
				<div data-component="textbox" data-component-path="users.filter.search" data-icon="fa-search" data-placeholder="Search users">Search</div>
			</div>
			<div class="col-md-3 m">
				<div data-component="dropdowncheckbox" data-component-path="users.filter.types" data-placeholder="All users" data-options="Activated users|1;Blocked users|2;Online users|3" data-icon="fa-users">State</div>
			</div>
			<div class="col-md-3 m">
				<div data-component="dropdowncheckbox" data-component-path="users.filter.roles" data-placeholder="All roles" data-source="users.roles" data-icon="fa-unlock">Roles</div>
			</div>
			<div class="col-md-3 m">
				<div data-component="dropdowncheckbox" data-component-path="users.filter.applications" data-placeholder="All applications" data-source="users.applications" data-icon="fa-th">Applications</div>
			</div>
		</div>
	</div>
</div>

<div class="container">
	<div class="row">
		<div class="col-md-12">
			<div data-component="grid" data-component-id="users" data-component-path="users" data-pagination-path="users.filter.page" data-max="auto" data-page="@(Page: #)" data-pages="@(# pages,# page,# pages,# pages)" data-items="@(# items,# item,# items,# items)" data-empty="@(Database does not have any data.)">
				<script type="text/html">
				<tr>
					<td style="width:25px"><img src="{{ email | photo }}" alt="{{ alias }}" border="0" height="14" /></td>
					<td style="width:150px"><i class="fa fa-circle {{ if online }}green{{ else }}red{{ fi }}"></i>{{ lastname }} {{ firstname }}</td>
					<td>&nbsp;</td>
					<td style="width:80px" class="ui-right">
						<button name="edit" title="@(Edit)"><span class="fa fa-pencil"></span></button>
						<button name="remove" title="@(Remove)"><span class="fa fa-times"></span></button>
					</td>
				</tr>
				</script>
			</div>
		</div>
	</div>
</div>

<script>
	var users = {};
	users.items = null;
	users.filter = { page: 1 };
	users.roles = [];

	AJAX('GET /api/users/', null, function(response) {
		users.datasource = response;
		users_filter();
	});

	function users_filter() {
		var max = FIND('#users').max;
		var pagination = users.datasource.pagination(max);
		users.pages = pagination.pages;
		users.count = pagination.count;
		users.page = users.filter.page;
	 	SET('users.items', users.datasource.paginate((users.filter.page - 1) * max, max));
	}

	WATCH('users.filter.*', users_filter);

</script>